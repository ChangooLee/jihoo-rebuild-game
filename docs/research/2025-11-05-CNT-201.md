# Research: CNT-201 - Math Content Generator (Sample 10 items)

**Date**: 2025-11-05
**Task ID**: CNT-201
**Risk Level**: 낮음

## Research Goal

Implement a TypeScript-based math content generator to produce 10 sample learning items that pass Zod schema validation, supporting the content generation pipeline described in README.md.

## Key Requirements

1. Generate 10 sample math problems covering different areas (수와연산, 변화와관계, 도형과측정, 자료와가능성)
2. Pass Zod schema validation defined in `apps/web/content/schema/learning-item.ts`
3. Output to `apps/web/content/math/bank.json`
4. Support grade bands: ES34, ES56, MS1, MS23
5. Include multiple choice questions with distractors
6. Include concept tags for personalized scheduling

## Research Findings

### 1. Content Generation Strategies

**Parametric Problem Generation**:
- Use seed-based random generation for reproducibility
- Generate distractors systematically (±10%, ±20%, ±30% of correct answer)
- Map problem types to Korean curriculum areas
- Sources: Educational research on math problem generation

**Schema Compliance**:
- Zod schema ensures type safety at runtime
- Required fields: id, subject, area, gradeBand, conceptTag, stem, answer, difficulty
- Optional fields: choices, hints, variants
- License: MIT-compatible approaches only

### 2. Problem Type Mapping

Based on Korean curriculum (교육과정):
- **수와연산** (Number & Operations): fractions, decimals, integers
- **변화와관계** (Patterns & Relations): equations, functions
- **도형과측정** (Geometry & Measurement): area, perimeter, volume
- **자료와가능성** (Data & Probability): statistics, probability

### 3. TypeScript Implementation Approach

**Key Decisions**:
1. Use pure TypeScript (no external math libraries) for minimal dependencies
2. Simple parametric generators for 10 samples (not production-scale yet)
3. Hash-based unique ID generation (MD5 or similar)
4. Difficulty estimation based on problem complexity
5. Store in single `bank.json` file for easy loading

**Trade-offs**:
- ✅ Pros: Type-safe, no Python dependency, runs in Node.js
- ⚠️ Cons: Less sophisticated than mathgenerator library
- ✅ Mitigation: Start simple with 10 samples, expand later

### 4. Integration with Loader

Current `loader.ts` expects:
- Content files in `public/content/` directory
- Index file at `public/content/index.json`
- Supports both JSON and YAML formats

**Approach**: Conditional loading in loader.ts to check for `math/bank.json` existence.

## Implementation Plan

1. **Create `tools/generators/math/build_bank.ts`**:
   - Simple problem generators for 4 math areas
   - 2-3 problems per area = ~10 total
   - Export to JSON with full Zod schema compliance

2. **Update `apps/web/modules/content/loader.ts`**:
   - Add optional check for `math/bank.json`
   - Merge generated content with static content if present
   - Handle missing file gracefully (no break existing functionality)

3. **No shell execution** (per CLAUDE.md instructions):
   - CI will run verification
   - Just create the files with proper structure

## Risks & Mitigations

**Risks**:
1. Schema validation failure → Mitigation: Test against Zod schema in code
2. File path issues → Mitigation: Use relative paths, check existing structure
3. Breaking existing loader → Mitigation: Make changes conditional/optional

**Rollback**: Simply remove the generated files and loader changes (no core logic modified)

## License & Attribution

- **Approach**: Original implementation (no code copying)
- **License**: MIT (compatible with project)
- **Sources**: Educational curriculum standards (public domain)
- **No third-party code** used directly

## Links

- Zod documentation: https://zod.dev/
- Korean National Curriculum: Public educational standards
- Schema location: `apps/web/content/schema/learning-item.ts`
- Existing Python generator: `tools/generators/math/build_bank.py` (reference only)

## Conclusion

Creating a simple TypeScript generator for 10 sample math problems is:
- Low risk (no core app modification)
- Schema-compliant (uses existing Zod validation)
- Curriculum-aligned (follows README.md structure)
- MIT-licensed (original implementation)

**Recommendation**: Proceed with implementation.
