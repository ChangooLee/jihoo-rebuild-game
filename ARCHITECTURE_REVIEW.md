# 아키텍처 & 목적 부합성 검토

## 📋 검토 개요
- **검토 일시**: 2025-11-03
- **검토 범위**: 전체 시스템 아키텍처, 교육 목적 부합성, 기술 스택
- **기준**: 제공된 README 설계 원칙

---

## ✅ 목적 달성 현황

### 1. 핵심 목표: "짧고 즉각적인 보상 루프"
**현재 상태**:
- ✅ 세션 구조 (10-15분) 설계 완료
- ✅ 과목별 3분 라운드 구조
- ⚠️ 강제 휴식 (50초) - UI 미구현
- ⚠️ 즉각 보상 시스템 - 부분 구현

**개선 필요**:
- 강제 휴식 애니메이션 구현
- 보상 피드백 강화 (사운드/진동/시각 효과)

### 2. 교육과정 반영
**현재 상태**:
- ✅ 한국 교육과정 태그 체계 구축
- ✅ 학년군 구분 (ES12~MS23)
- ✅ 4과목 (수학/영어/과학/사회) 콘텐츠 구조
- ✅ 개념 태그 기반 분류

**문항 현황**:
```
수학:   506개 (20.2%) - 목표 40%
영어:   624개 (24.8%) - 목표 30%
과학:   812개 (32.4%) - 목표 15%
사회:   812개 (32.4%) - 목표 15%
────────────────────────────
총계: 2,754개 (100%)
```

**분석**:
- 과학/사회가 과다 생성됨
- 수학 문항 추가 생성 필요 (2배)
- 파이프라인 비율 조정 완료 (40:30:15:15)

### 3. 적응 학습 엔진
**현재 상태**:
- ✅ 진단 엔진 구조 (modules/diagnostic/)
- ✅ FSRS 기반 분산 학습 준비
- ⚠️ 1-up-1-down 난이도 조정 - 부분 구현
- ⚠️ 반응시간 보정 - 미구현

**개선 필요**:
- 진단 테스트 12문항 완성
- 실시간 난이도 조정 적용
- 속도 보정 로직 구현

### 4. 개인화 경로
**현재 상태**:
- ✅ 약점 태그 추출 로직
- ✅ 개인화 스케줄러 구조
- ⚠️ 2주 60% → 4주 40% 전환 - 미구현
- ⚠️ 리콜 보스 - 기초 구현

**개선 필요**:
- 약점 비중 자동 조정
- FSRS Due 큐 우선순위

---

## 🏗️ 아키텍처 평가

### Frontend (Next.js)
**장점**:
- ✅ App Router 구조 명확
- ✅ PWA 셋업 (next-pwa)
- ✅ TypeScript 타입 안정성
- ✅ IndexedDB (Dexie) 로컬 저장

**개선점**:
- ⚠️ 게임 엔진 (Phaser/Pixi) 미통합
- ⚠️ 사운드 시스템 (howler.js) 미구현
- ⚠️ 집중모드 UI 미구현

### 콘텐츠 파이프라인
**장점**:
- ✅ 4과목 자동 생성기 완성
- ✅ GitHub Actions 주간 자동화
- ✅ 검증 스크립트 (validate-simple.mjs)
- ✅ 시드 기반 증분 생성

**개선점**:
- ⚠️ 비율 조정 필요 (현재 20:25:32:32 → 목표 40:30:15:15)
- ⚠️ Wikidata/Tatoeba 등 OER 파이프라인 미구현
- ⚠️ 문항 품질 검증 강화 (현재 기본 필드만)

### 학습 엔진
**장점**:
- ✅ 모듈 구조 (focus/review/diagnostic/notification)
- ✅ FSRS 통합 준비
- ✅ 알림 시스템 기초

**개선점**:
- ⚠️ 세션 타이머 미완성
- ⚠️ 오답 변주 시스템 미구현
- ⚠️ 대시보드 고도화 필요

---

## 🎯 설계 원칙 준수도

### 1. 집중력 친화 설계
| 원칙 | 상태 | 점수 |
|------|------|------|
| 짧은 단위 (2-4분) | 구조만 | 60% |
| 즉각 보상 | 부분 | 40% |
| 명확한 끝 | 구조만 | 50% |
| 강제 휴식 | 미구현 | 10% |
| **평균** | | **40%** |

### 2. 학습 최적화
| 원칙 | 상태 | 점수 |
|------|------|------|
| 적응 난이도 | 부분 | 60% |
| 분산 반복 (FSRS) | 준비 | 50% |
| 교차 학습 | 구조만 | 40% |
| 오답 순환 | 부분 | 30% |
| **평균** | | **45%** |

### 3. 접근성
| 원칙 | 상태 | 점수 |
|------|------|------|
| 낮은 마찰 | 구조만 | 70% |
| 실수 안전지대 | 미구현 | 20% |
| 감각 최적화 | 미구현 | 10% |
| 프라이버시 | 완료 | 90% |
| **평균** | | **48%** |

---

## 📊 우선순위 로드맵

### Phase 1: 콘텐츠 균형 (1주) ✅ 진행중
- ✅ 영어/과학/사회 생성기
- ✅ 파이프라인 비율 조정 (40:30:15:15)
- ⏳ 수학 문항 추가 생성 (2배)

### Phase 2: 핵심 UX (2주)
- 세션 타이머 + 진행 바
- 강제 휴식 애니메이션
- 즉각 보상 (사운드/진동/효과)
- 결과 화면 + 누적 통계

### Phase 3: 학습 엔진 (2주)
- 진단 테스트 12문항 완성
- 적응 난이도 (1-up-1-down + 속도)
- FSRS 리콜 보스 통합
- 약점 태그 기반 스케줄링

### Phase 4: 게임 경험 (3주)
- 워밍업 과제 (Stroop/N-back)
- 미니게임 UI 개선
- 보상 시스템 (칭호/테마)
- 대시보드 고도화

### Phase 5: 고도화 (3주)
- 영어 STT (따라말하기)
- 과학 인터랙티브
- 주간 미션/테마
- 보호자 리포트

---

## 🔍 기술 부채

### 긴급 (1주 이내)
1. **콘텐츠 비율 불균형** - 수학 2배 증가 필요
2. **타입 에러** - UserProfile id 필드 충돌
3. **검증 강화** - 문항 품질 체크 부족

### 중요 (2주 이내)
1. **세션 흐름 미구현** - 타이머/휴식/진행 바
2. **보상 시스템 부재** - 피드백 루프 약함
3. **진단 테스트 미완성** - 12문항 구조만

### 개선 (1개월 이내)
1. **게임 엔진 통합** - Phaser/Pixi 미사용
2. **사운드 시스템** - howler.js 미구현
3. **대시보드 시각화** - 기초 통계만

---

## ✅ 권장사항

### 즉시 조치
1. **콘텐츠 재생성** - 비율 40:30:15:15 맞추기
   ```bash
   # 수학만 2배로 재생성
   python3 tools/generators/math/build_bank.py --seeds 100
   ```

2. **index.json 검증** - 모든 과목 파일 포함 확인

3. **CI 파이프라인 테스트** - 주간 자동화 검증

### 단기 목표 (2주)
1. 세션 타이머 + 진행 바 구현
2. 강제 휴식 (50초) 애니메이션
3. 즉각 보상 (정답 시 효과)
4. 결과 화면 기본 구현

### 중기 목표 (1개월)
1. 진단 테스트 12문항 완성
2. 적응 난이도 1-up-1-down
3. FSRS 리콜 보스 통합
4. 대시보드 기본 차트

---

## 📝 결론

### 강점
- ✅ 명확한 아키텍처 구조
- ✅ 자동화된 콘텐츠 파이프라인
- ✅ 교육과정 기반 태그 체계
- ✅ 로컬 우선 프라이버시

### 약점
- ⚠️ 콘텐츠 비율 불균형
- ⚠️ 게임 UX 미완성
- ⚠️ 학습 엔진 부분 구현
- ⚠️ 보상 시스템 부재

### 목적 부합성: **60%**
- 구조/설계: 85%
- 구현/완성도: 40%
- 사용 가능성: 55%

**종합 평가**: 설계와 방향성은 매우 우수하나, 핵심 UX와 학습 엔진 구현이 필요한 상태. 우선순위 로드맵에 따라 순차 구현 시 목표 달성 가능.

---

**검토자**: AI Assistant  
**검토 일시**: 2025-11-03  
**다음 검토**: Phase 2 완료 후

