# Learning Quest — 게임으로 배우는 집중력과 학습

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Node.js](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)

**집중력과 학습을 동시에 향상시키는 웹 기반 교육 게임 플랫폼**

짧고 즉각적인 보상 루프로 매일 해도 지루하지 않은 학습 경험을 제공합니다.

---

## 📋 목차

- [핵심 개요](#-핵심 개요)
- [설계 원칙](#-설계 원칙)
- [교육과정 반영](#-한국-교육과정-반영)
- [게임 설계](#-게임-설계)
- [기술 스택](#️-기술-스택)
- [시작하기](#-시작하기)
- [프로젝트 구조](#-프로젝트-구조)
- [개발 로드맵](#-개발-로드맵)

---

## 🎯 핵심 개요

### 타깃
- **한국 초등(ES) · 중등(MS) 학년군**
- 집중력 향상과 학습을 동시에 필요로 하는 모든 학생

### 세션 구조 (10-15분)
1. **워밍업** (90초) - 주의력 준비
2. **과목 A** (3분) - 수학 
3. **휴식** (50초) - 강제 휴식
4. **과목 B** (3분) - 영어
5. **휴식** (50초)
6. **과목 C** (3분) - 과학/사회
7. **리콜 보스** (1분) - 오답 복습
8. **리포트** (30초) - 결과 확인

### 핵심 특징
- ✅ **짧은 과제** - 2-4분 미니게임
- ⚡ **즉각 보상** - 정답/시도/지속에 즉시 피드백
- 🎯 **명확한 목표** - 각 세션의 명확한 시작과 끝
- 😌 **강제 휴식** - 번아웃 방지
- 📊 **적응 난이도** - 개인 수준 자동 조정
- 📚 **분산 학습** - FSRS 알고리즘 기반
- 🔄 **교차 학습** - 과목/형식 변주

### 과목 분포 (자동 조정)
- **수학** 40% - 계산, 개념, 추론
- **영어** 30% - 듣기, 읽기, 문법
- **과학** 15% - 원리, 실험, 관찰
- **사회** 15% - 지리, 역사, 시민

---

## 💡 설계 원칙

### 1. 집중력 친화 설계
- **짧은 단위**: 2-4분 미니게임으로 주의력 유지
- **즉각 보상**: 정답/시도 시 즉시 피드백
- **명확한 끝**: 각 라운드의 명확한 종료점
- **강제 휴식**: 40-60초 호흡 애니메이션

### 2. 학습 최적화
- **적응 난이도**: 1-up-1-down + 반응시간 보정
- **분산 반복**: FSRS 간격 최적화
- **교차 학습**: 과목/형식 변주로 장기 기억
- **오답 순환**: 변주된 형태로 재출제

### 3. 접근성
- **낮은 마찰**: 원클릭 시작, 로그인 불필요
- **실수 안전지대**: 오답도 보상, 즉시 재도전
- **감각 최적화**: 집중모드, 폰트/애니 조절
- **프라이버시**: 로컬 우선 저장

---

## 📚 한국 교육과정 반영

### 학년군 체계
- **ES12** (초등 1-2)
- **ES34** (초등 3-4)
- **ES56** (초등 5-6)
- **MS1** (중등 1)
- **MS23** (중등 2-3)

### 수학 (4영역)

| 학년군 | 수와연산 | 변화와관계 | 도형과측정 | 자료와가능성 |
|--------|----------|-----------|-----------|-------------|
| ES34 | 세 자리수, 분수 기초 | 식으로 규칙 표현 | 각/둘레/넓이 | 막대그래프 |
| ES56 | 분수·소수 연산, 비율 | 비례식 | 원·다각형 | 평균/가능성 |
| MS1 | 정수·유리수, 일차식 | 좌표·함수 | 기본 작도 | 대푯값·산포 |
| MS23 | 연립/부등식, 일차함수 | 함수 심화 | 닮음/피타고라스 | 확률·분석 |

### 영어 (4기능)

| 학년군 | 듣기/말하기 | 읽기/쓰기 | 문법/어휘 |
|--------|------------|----------|----------|
| ES | 일상표현, 파닉스 | 짧은 읽기·쓰기 | be/일상동사 |
| MS1 | 질문/요청/의견 | 주제·요지 파악 | 현재/과거시제 |
| MS2 | 요약·문단 쓰기 | 연결어 | 조동사/비교 |
| MS3 | 발표/토론 기초 | 주장-근거 | 관계사/가정법 |

### 과학 (4영역)

| 학년군 | 운동·에너지 | 물질 | 생명 | 지구·우주 |
|--------|------------|------|------|----------|
| ES56 | 전기회로·빛 | 혼합물과 분리 | 인체·생태계 | 기상·기후 |
| MS1 | 속력 기초 | 입자·구성 | 세포·조절 | 대기·해양 |
| MS2 | 전기·자기 | 화학 변화 | 유전 기초 | 지권·화산 |

### 사회 (통합)

| 학년군 | 주요 내용 |
|--------|----------|
| ES | 우리 지역/국가, 기본 권리·규범, 지도 기초 |
| MS1 | 세계 지리 기초, 한국사 개관, 민주주의 원리 |
| MS2 | 정치·법(선거/삼권), 경제(시장), 사회문화 |

---

## 🎮 게임 설계

### 미니게임 예시

**수학**
- 스피드 연산, 분수↔소수 변환
- 그래프 읽기, 평균·최빈값 계산

**영어**
- 듣고 그림/문장 매칭 (TTS en-GB)
- 따라 말하기 (STT 옵션)
- 짧은 지문 리콜

**과학/사회**
- 원인-결과 연결
- 지도·국기·수도 매칭
- 실험 시뮬레이션
- 시나리오 선택형

### 오답 반복 전략
1. **FSRS 간격 최적화** - 망각 직전 재출제
2. **형식 변주** - 문장/스킨/형식 변경
3. **난이도 조정** - 오답 시 반단계 하향
4. **속도 보정** - 느린 정답은 'hard' 기록

### 집중 유지 시스템
- 포커스 타이머 (120/150/180초)
- 라운드 종료 자동 잠금
- 호흡 애니메이션 (스킵 제한)
- 알림 (Web Push + 로컬)
- 집중모드 (배경음·애니 최소화)

---

## 🎯 레벨링 진단 & 개인화

### 진단 테스트 (10-12분)
- 과목별 12문항 (각 45-60초)
- 수학: 4영역 × 3문항
- 영어: 듣기 4 / 읽기 4 / 문법 4
- 과학/사회: 핵심 개념 혼합

**추정 결과**
- `gradeBand`: 학년군 추정
- `weakTags[]`: 약점 개념 추출

### 개인화 스케줄러
- 첫 2주: 약점 비중 60% → 3-4주차 40%
- 세션 내 과목 비율 자동 튜닝
- 리콜 보스: FSRS Due 우선 출제

---

## 🛠️ 기술 스택

### Frontend
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS + shadcn/ui
- **Game Components**: React Components (custom game implementations)

### 학습 엔진
- **Spaced Repetition**: fsrs.js
- **Storage**: Dexie.js (IndexedDB)
- **PWA**: next-pwa (Service Worker)
- **TTS/STT**: Web Speech API (en-GB)

### 데이터
- **Validation**: Zod
- **Visualization**: Recharts
- **State**: React Hooks

### 백엔드 (옵션)
- Node.js/NestJS + PostgreSQL
- Supabase (Auth/DB/Edge)
- Web Push (VAPID)

---

## 🚀 시작하기

### 필요 사항
- Node.js 18.0.0 이상
- npm 9.0.0 이상

### 설치 및 실행

```bash
# 1. 저장소 클론
git clone https://github.com/your-org/learning-quest.git
cd learning-quest

# 2. 의존성 설치
cd apps/web
npm install

# 3. 개발 서버 실행
npm run dev
# → http://localhost:3000

# 4. 프로덕션 빌드
npm run build
npm start
```

### 콘텐츠 자동 생성

```bash
# Python 환경 설정 (최초 1회)
cd tools
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# 콘텐츠 생성 (모든 과목)
python3 generators/math/build_bank.py --seeds 50
python3 generators/english/build_bank.py --seeds 15
python3 generators/science/build_bank.py --seeds 3
python3 generators/social/build_bank.py --seeds 2

# 검증
node builder/validate-simple.mjs
```

**참고**: 생성된 콘텐츠는 `apps/web/content/` 디렉토리에 JSON 파일로 저장됩니다. 
GitHub Actions가 매주 자동으로 생성하므로, 로컬에서 수동 생성은 선택사항입니다.

---

## 📁 프로젝트 구조

```
jihoo-rebuild-game/
├─ apps/web/                 # Next.js PWA
│  ├─ app/                   # App Router
│  │  ├─ page.tsx            # 홈페이지
│  │  ├─ session/            # 세션 페이지
│  │  ├─ diagnostic/         # 진단 테스트 페이지
│  │  ├─ dashboard/          # 대시보드 페이지
│  │  ├─ report/             # 리포트 페이지
│  │  └─ settings/           # 설정 페이지
│  ├─ components/            # UI 컴포넌트
│  ├─ modules/
│  │  ├─ focus/              # 타이머/휴식
│  │  ├─ review/             # FSRS/리콜
│  │  ├─ scheduler/          # 개인화 스케줄러
│  │  ├─ diagnostic/         # 진단 테스트 엔진
│  │  ├─ notification/       # 알림
│  │  ├─ fsrs/               # FSRS 엔진
│  │  ├─ engine/              # 적응 난이도 엔진
│  │  ├─ content/             # 콘텐츠 로더
│  │  └─ analytics/          # KPI 분석
│  ├─ game/                  # 미니게임
│  │  ├─ math/               # 수학 게임
│  │  ├─ english/            # 영어 게임
│  │  ├─ science/            # 과학 게임
│  │  ├─ social/             # 사회 게임
│  │  └─ warmup/             # 워밍업 (Stroop)
│  ├─ content/               # 학습 콘텐츠 (스키마)
│  │  └─ schema/             # Zod 스키마 정의
│  └─ lib/                   # 유틸리티 (타입, DB, 데이터 관리)
├─ tools/                    # 콘텐츠 파이프라인
│  ├─ generators/            # Python 기반 생성기
│  │  ├─ math/               # 수학 생성기 (build_bank.py)
│  │  ├─ english/            # 영어 생성기 (build_bank.py)
│  │  ├─ science/            # 과학 생성기 (build_bank.py)
│  │  └─ social/             # 사회 생성기 (build_bank.py)
│  └─ builder/               # 검증/정규화
│     ├─ validate.mjs        # 스키마 검증
│     └─ validate-simple.mjs # 간단 검증
├─ docs/                     # 문서
│  ├─ AUTO_TASKS.yml         # 자동 태스크 백로그
│  ├─ research/              # 연구 문서
│  └─ logs/                  # 로그 파일
├─ skills/                   # 개발 스크립트
│  ├─ setup.sh               # 환경 설정
│  ├─ verify.sh              # 품질 게이트
│  └─ ...                    # 기타 스크립트
└─ .github/workflows/        # CI/CD
   ├─ ci.yml                 # 표준 CI
   ├─ claude-auto-upgrade.yml # Claude 자동 업그레이드
   └─ content-pipeline.yml   # 콘텐츠 자동 생성

```

---

## 🗺️ 개발 로드맵

### Phase 1: MVP (완료)
- ✅ PWA 셋업 (next-pwa)
- ✅ 로컬 저장 (Dexie.js)
- ✅ 콘텐츠 생성 파이프라인 (수학/영어/과학/사회)
- ✅ 콘텐츠 검증 파이프라인
- ✅ 알림 시스템 기초
- ✅ GitHub Actions CI/CD

### Phase 2: 콘텐츠 균형 (진행 중)
- 🔄 영어 문항 자동 생성
- 🔄 과학 문항 자동 생성
- 🔄 사회 문항 자동 생성
- ⏳ 과목 비율 40:30:15:15 달성

### Phase 3: 게임 경험
- ✅ 워밍업 과제 (Stroop 구현됨)
- 🔄 미니게임 UI 개선
- ✅ 강제 휴식 애니메이션 (박스 호흡)
- 🔄 보상 시스템

### Phase 4: 학습 엔진
- ✅ 진단 테스트 12문항
- ✅ 적응 난이도 (1-up-1-down)
- ✅ FSRS 리콜 보스
- ✅ 오답 변주 시스템

### Phase 5: 고도화
- ✅ 영어 STT (따라말하기 구현됨)
- 🔄 과학 인터랙티브
- ⏳ 주간 미션/테마
- 🔄 대시보드 기본 구현 완료 (고도화 진행 중)

---

## 📊 콘텐츠 현황

| 과목 | 현재 | 목표 (10주 후) | 자동화 |
|------|------|---------------|--------|
| 수학 | 생성 파이프라인 준비됨 | 13,800개 | ✅ 매주 +1,150 |
| 영어 | 생성 파이프라인 준비됨 | 10,000개 | ✅ 매주 +15개 |
| 과학 | 생성 파이프라인 준비됨 | 5,000개 | ✅ 매주 +3개 |
| 사회 | 생성 파이프라인 준비됨 | 5,000개 | ✅ 매주 +2개 |

**자동 생성 스케줄**
- 매주 일요일 18:00 KST (UTC 09:00)
- GitHub Actions 자동 실행 (`.github/workflows/content-pipeline.yml`)
- PR 생성 → 리뷰 → 병합 → 배포
- **참고**: 실제 콘텐츠 데이터는 첫 실행 시 생성됩니다

---

## 🔒 프라이버시 & 안전

- **로컬 우선**: IndexedDB 기본 저장
- **선택적 동기화**: 익명 ID로 서버 연동
- **데이터 권리**: JSON 내보내기/삭제
- **의료기기 아님**: 상담·치료 대체 불가
- **광고/결제 없음**: 완전 무료

---

## 🎓 교육적 근거

### 집중력 설계 원칙
1. **짧은 과제** - 주의력 유지 한계 고려
2. **즉각 피드백** - 도파민 보상 루프
3. **강제 휴식** - 번아웃 방지
4. **명확한 끝** - 성취감 제공

### 학습 최적화
1. **분산 반복** (FSRS) - 장기 기억 강화
2. **교차 학습** - 일반화 능력 향상
3. **적응 난이도** - 최적 도전 수준 유지
4. **오답 순환** - 약점 집중 보완

---

## 📄 라이선스

MIT License

---

## 🙏 기여

이 프로젝트는 오픈소스입니다. 기여를 환영합니다!

### 콘텐츠 기여
- 교육과정 기반 문항 작성
- 라이선스 준수 (MIT/CC BY/CC0)
- `content/` 디렉토리 참조

### 코드 기여
- Issues/PR 환영
- 코드 스타일: Prettier/ESLint
- 테스트 작성 권장

---

**Learning Quest** - 모든 학생의 집중력과 학습을 위한 플랫폼
